# @format

# Fund Watchlist types and operations

type FundWatchlist {
  id: UUID!
  symbol: String!
  marketType: String!

  # Metadata
  category: String!
  tier: Int!

  # State
  isActive: Boolean!
  isPaused: Boolean!
  pausedReason: String

  # Analytics
  lastAnalyzedAt: Time

  # Timestamps
  createdAt: Time!
  updatedAt: Time!
}

"""
Edge type for FundWatchlist
"""
type FundWatchlistEdge {
  """
  The item at the end of the edge
  """
  node: FundWatchlist!

  """
  A cursor for use in pagination
  """
  cursor: String!
}

"""
Connection type for FundWatchlist collection
"""
type FundWatchlistConnection {
  """
  A list of edges
  """
  edges: [FundWatchlistEdge!]!

  """
  Information to aid in pagination
  """
  pageInfo: PageInfo!

  """
  Total count of items (if available)
  """
  totalCount: Int!
}

input CreateFundWatchlistInput {
  symbol: String!
  marketType: String!
  category: String!
  tier: Int!
}

input UpdateFundWatchlistInput {
  category: String
  tier: Int
  isActive: Boolean
  isPaused: Boolean
  pausedReason: String
}

# Queries
extend type Query {
  # Get watchlist item by ID
  fundWatchlist(id: UUID!): FundWatchlist

  # Get watchlist item by symbol
  fundWatchlistBySymbol(symbol: String!, marketType: String!): FundWatchlist

  # Get all watchlist items (legacy, use fundWatchlistsConnection)
  fundWatchlists(
    limit: Int
    offset: Int
    isActive: Boolean
    category: String
    tier: Int
  ): [FundWatchlist!]! @deprecated(reason: "Use fundWatchlistsConnection instead")

  # Get monitored symbols (active and not paused, legacy)
  monitoredSymbols(marketType: String): [FundWatchlist!]! @deprecated(reason: "Use monitoredSymbolsConnection instead")

  # Get all watchlist items (Relay Connection)
  fundWatchlistsConnection(
    isActive: Boolean
    category: String
    tier: Int
    first: Int
    after: String
    last: Int
    before: String
  ): FundWatchlistConnection!

  # Get monitored symbols (active and not paused, Relay Connection)
  monitoredSymbolsConnection(
    marketType: String
    first: Int
    after: String
    last: Int
    before: String
  ): FundWatchlistConnection!
}

# Mutations
extend type Mutation {
  # Add symbol to watchlist
  createFundWatchlist(input: CreateFundWatchlistInput!): FundWatchlist!

  # Update watchlist item
  updateFundWatchlist(
    id: UUID!
    input: UpdateFundWatchlistInput!
  ): FundWatchlist!

  # Remove from watchlist
  deleteFundWatchlist(id: UUID!): Boolean!

  # Batch delete from watchlist
  batchDeleteFundWatchlists(ids: [UUID!]!): Int!

  # Pause/unpause monitoring
  toggleFundWatchlistPause(
    id: UUID!
    isPaused: Boolean!
    reason: String
  ): FundWatchlist!
}
